---
import BaseIndex from "../components/pages/IndexPage.astro";
import { availableLanguagesPerCountry } from "../i18n/ui";
import { getLang, getCountryFromUrl } from "../i18n/utils";

const lang = getLang(Astro.url, Astro.cookies);
const country = getCountryFromUrl(Astro.url);

// Redirect to correct lang if not present in slug
if (
  availableLanguagesPerCountry[country].length > 1 &&
  Astro.url.pathname === "/"
) {
  return Astro.redirect(`/${lang}`);
}
---

<BaseIndex lang={lang} />
