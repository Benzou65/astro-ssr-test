---
import { availableLanguagesPerCountry } from "../../i18n/ui";
import { getLangFromCookie } from "../../i18n/utils";

const favLang = getLangFromCookie(Astro.cookies);
const domain = Astro.url.pathname.replaceAll("/", "");

if (favLang) {
  const url = domain + "/" + favLang;
  return Astro.redirect(url);
} else {
  return Astro.redirect(
    `/${domain}/${availableLanguagesPerCountry[domain][0]}`
  );
}
---
