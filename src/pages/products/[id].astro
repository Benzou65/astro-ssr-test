---
import Container from "../../components/Container.astro";
import AddToCart from "../../components/AddToCart.astro";
import { getProduct } from "../../api";
import "../../styles/common.css";
import AddToCartForm from "../../components/AddToCartForm.tsx";
import Layout from "../../layouts/Layout.astro";

const id = Number(Astro.params.id);
const product = await getProduct(Astro.request, id);
---

<Layout>
  <Container tag="article">
    <h2>{product.name}</h2>
    <figure>
      <img src={product.image} />
      <figcaption>
        <AddToCartForm product={{ ...product, quantity: 1 }} client:load>
          <AddToCart />
          <p>Description here...</p>
        </AddToCartForm>
      </figcaption>
    </figure>
  </Container>
</Layout>

<style>
  img {
    width: 20rem;
  }
</style>
